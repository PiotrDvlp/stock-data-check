(function(t){function e(e){for(var n,r,c=e[0],i=e[1],l=e[2],p=0,m=[];p<c.length;p++)r=c[p],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&m.push(o[r][0]),o[r]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n]);u&&u(e);while(m.length)m.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,c=1;c<a.length;c++){var i=a[c];0!==o[i]&&(n=!1)}n&&(s.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},o={app:0},s=[];function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/stock-data-check/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=i;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0e85":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("the-layout",[a("router-view")],1)],1)},s=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layout"},[a("the-navbar"),a("main",{staticClass:"layout__main pt-4"},[a("b-container",{attrs:{fluid:""}},[a("b-row",[a("b-col",[a("h1",{staticClass:"h4 mb-4"},[t._v(t._s(t.setTitle))])])],1),a("b-row",[t._t("default")],2)],1)],1)],1)},c=[],i=(a("b0c0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"layout__header"},[a("b-navbar",{attrs:{toggleable:"sm",type:"light",variant:"light"}},[a("b-container",{attrs:{fluid:""}},[a("b-navbar-toggle",{attrs:{target:"nav-text-collapse"}}),a("b-navbar-brand",[t._v("Stock Tracker")]),a("b-collapse",{attrs:{id:"nav-text-collapse","is-nav":""}},[a("b-navbar-nav",[a("router-link",{attrs:{to:"/"}},[t._v("Track New Company")]),t._v(" | "),a("router-link",{attrs:{to:"/company-list"}},[t._v("Companies")])],1)],1)],1)],1)],1)}),l=[],u={name:"TheNavbar"},p=u,m=a("2877"),d=Object(m["a"])(p,i,l,!1,null,null,null),h=d.exports,f={name:"TheLayout",components:{TheNavbar:h},computed:{setTitle:function(){return"CompanyAdd"===this.$route.name?"Track new company":"Companies"}}},y=f,b=Object(m["a"])(y,r,c,!1,null,null,null),v=b.exports,_={name:"App",components:{TheLayout:v}},C=_,g=Object(m["a"])(C,o,s,!1,null,null,null),O=g.exports,w=a("8c4f"),j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-col",{attrs:{cols:"3"}},[a("form-data-model",{attrs:{filter:t.companySymbol},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.addCompany,o=e.companies,s=e.selectCompany;return[a("b-form",{on:{submit:function(t){return t.preventDefault(),n.apply(null,arguments)}}},[a("b-form-group",{attrs:{id:"input-group-1",label:"Company symbol:","label-for":"company-symbol",description:"Provide the stock exchange symbol of a company you want to track."}},[a("vue-bootstrap-typeahead",{attrs:{data:o,serializer:function(t){return t.symbol},placeholder:"Enter company symbol"},on:{hit:function(t){return s(t)}},scopedSlots:t._u([{key:"suggestion",fn:function(e){var n=e.data,o=e.htmlText;return[a("span",{staticClass:"d-flex justify-content-between align-center"},[a("span",{domProps:{innerHTML:t._s(o)}}),a("small",[t._v(t._s(n.name))])])]}}],null,!0),model:{value:t.companySymbol,callback:function(e){t.companySymbol=e},expression:"companySymbol"}})],1),a("b-button",{staticClass:"mt-4",attrs:{disabled:!t.companySymbol.length,type:"submit",variant:"primary"}},[t._v("Track")])],1)]}}])})],1)},k=[],x=a("2909"),S=a("5530"),T=a("3835"),D=a("c7eb"),L=a("1da1"),A=(a("d81d"),a("d3b7"),a("ac1f"),a("5319"),a("3ca3"),a("ddb0"),a("99af"),a("d4ec")),M=a("bee2"),P=a("bc3a"),E=a.n(P),N="35P88PTYC0V4WNWM",$=function(){function t(){Object(A["a"])(this,t);var e=E.a.create();this.service=e}return Object(M["a"])(t,[{key:"getCompanyBySymbol",value:function(t){return this.service.get("https://www.alphavantage.co/query?function=SYMBOL_SEARCH&keywords=".concat(t,"&apikey=").concat(N))}},{key:"getClearbitData",value:function(t){return this.service.get("https://autocomplete.clearbit.com/v1/companies/suggest?query=".concat(t))}},{key:"getAlphavData",value:function(t){return this.service.get("https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=".concat(t,"&apikey=").concat(N))}},{key:"getAlphavInterday",value:function(t){return this.service.get("https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=".concat(t,"&interval=5min&apikey=").concat(N))}}]),t}(),I=new $,R=a("2ef0"),B=a("ec26"),F=(a("e9c4"),function(t,e){return localStorage.setItem(t,JSON.stringify(e))}),q=function(t){return JSON.parse(localStorage.getItem(t))},J=a("ade3"),z=(a("b64b"),function(t){return Object(R["camelCase"])(t.substring(t.indexOf(" ")+1))}),G=function(t){return Object.keys(t).reduce((function(e,a){return Object(S["a"])(Object(S["a"])({},e),Object(J["a"])({},z(a),t[a]))}),{})},Q={props:{filter:String},data:function(){return{bestMatches:[],chosenCompanies:[],chosenCompany:null,error:null}},created:function(){var t,e=null!==(t=q("chosenCompanies"))&&void 0!==t?t:[];e.length&&(this.chosenCompanies=e)},computed:{companies:function(){return this.bestMatches.length?this.bestMatches.map((function(t){return G(t)})):[]}},methods:{selectCompany:function(t){this.chosenCompany=t},findCompanyBySymbol:function(t){var e=this;return Object(L["a"])(Object(D["a"])().mark((function a(){var n;return Object(D["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,I.getCompanyBySymbol(t);case 3:n=a.sent,e.bestMatches=n.data.bestMatches,e.error=null,a.next=13;break;case 8:a.prev=8,a.t0=a["catch"](0),e.bestMatches=[],e.error=a.t0.response,console.error(a.t0.response);case 13:case"end":return a.stop()}}),a,null,[[0,8]])})))()},addCompany:function(){var t=this,e=this.chosenCompanies.some((function(e){var a=e.symbol;return t.chosenCompany.symbol===a})),a=this.chosenCompany.name.replace(/[^a-z0-9]+/gi,"");e?console.error("Company is already present"):this.getAdditionalCompanyData(a)},getAdditionalCompanyData:function(t){var e=this;return Object(L["a"])(Object(D["a"])().mark((function a(){var n,o,s,r,c,i;return Object(D["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,n=I.getClearbitData(t),o=I.getAlphavData(e.chosenCompany.symbol),a.next=5,Promise.all([n,o]);case 5:s=a.sent,r=Object(T["a"])(s,2),c=r[0],i=r[1],e.setAdditionalData(c.data,i.data),e.error=null,a.next=17;break;case 13:a.prev=13,a.t0=a["catch"](0),e.error=a.t0.response,console.error(e.response);case 17:case"end":return a.stop()}}),a,null,[[0,13]])})))()},setAdditionalData:function(t,e){var a=Object(B["a"])(),n=Object(S["a"])(Object(S["a"])(Object(S["a"])(Object(S["a"])({},t[0]&&Object(S["a"])({},t[0])),e["Global Quote"]&&Object(S["a"])({},G(e["Global Quote"]))),this.chosenCompany),{},{uuid:a});this.chosenCompany=n,this.handleStorage()},handleStorage:function(){this.chosenCompanies?(F("chosenCompanies",[].concat(Object(x["a"])(this.chosenCompanies),[this.chosenCompany])),this.$router.push("/company-list")):F("chosenCompanies",[this.chosenCompany])}},watch:{filter:Object(R["debounce"])((function(t){t.length&&this.findCompanyBySymbol(t)}),500)},render:function(){return this.$scopedSlots.default({addCompany:this.addCompany,chosenCompanies:this.chosenCompanies,companies:this.companies,selectCompany:this.selectCompany})}},Y={name:"CompanyAdd",components:{FormDataModel:Q},data:function(){return{companySymbol:""}}},H=Y,W=Object(m["a"])(H,j,k,!1,null,null,null),U=W.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-col",{attrs:{cols:"4"}},[a("company-list-model",{scopedSlots:t._u([{key:"default",fn:function(e){var n=e.chosenCompanies,o=e.removeFromList;return[a("div",[n.length?a("ul",{staticClass:"company__list"},t._l(n,(function(t){return a("company-list-item",{key:t.uuid,attrs:{company:t},on:{"remove-company":o}})})),1):a("div",[a("div",[a("p",[t._v(" There are no companies yet. "),a("router-link",{attrs:{to:"/"}},[t._v(" Track your first company.")])],1)])])])]}}])})],1)},K=[],X=(a("4de4"),a("7db0"),{data:function(){return{chosenCompanies:[],error:null}},created:function(){var t,e=null!==(t=q("chosenCompanies"))&&void 0!==t?t:[];e.length&&(this.chosenCompanies=e,this.getLatestData())},methods:{getLatestData:function(){var t=this;return Object(L["a"])(Object(D["a"])().mark((function e(){var a,n;return Object(D["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.chosenCompanies.map((function(t){var e=t.symbol;return I.getAlphavInterday(e)})),e.prev=1,e.next=4,Promise.all(a);case 4:n=e.sent,t.formatLatestData(n),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))()},formatLatestData:function(t){var e=t.filter((function(t){var e=t.data;return e["Meta Data"]})).reduce((function(t,e){var a=G(e.data["Meta Data"]),n=a.symbol,o=a.lastRefreshed,s=G(e.data["Time Series (5min)"][o]),r=s.close,c={close:r,lastRefreshed:o,symbol:n};return t.push(c),t}),[]);this.setLatestData(e)},setLatestData:function(t){this.chosenCompanies=this.chosenCompanies.map((function(e){var a=t.find((function(t){return t.symbol===e.symbol}));return a?Object.assign(e,a):e})),F("chosenCompanies",this.chosenCompanies)},removeCompany:function(t){this.chosenCompanies=this.chosenCompanies.filter((function(e){var a=e.uuid;return a!==t})),F("chosenCompanies",this.chosenCompanies)}},render:function(){return this.$scopedSlots.default({chosenCompanies:this.chosenCompanies,removeFromList:this.removeCompany})}}),Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"company-data d-flex flex-row py-2",on:{mouseover:function(e){t.showRemoveOption=!0},mouseleave:function(e){t.showRemoveOption=!1}}},[a("span",{directives:[{name:"show",rawName:"v-show",value:t.showRemoveOption,expression:"showRemoveOption"}],staticClass:"company-data__remove",on:{click:t.removeCompany}},[a("b-icon-x-lg",{})],1),a("div",{staticClass:"company-data__logo"},[a("b-img",{attrs:{src:t.setImage,fluid:""}})],1),a("div",{staticClass:"company-data__details"},[a("div",{staticClass:"company-data__name"},[a("span",{staticClass:"company-data__info company-data__info--bold compaenvny-data__info--big"},[t._v(t._s(t.company.name))]),a("span",{staticClass:"company-data__info"},[t._v(t._s(t.company.symbol))]),a("span",{staticClass:"company-data__info"},[t._v(t._s(t.company.domain))])]),a("div",{staticClass:"company-data__local"},[a("span",{staticClass:"company-data__info"},[t._v(t._s(t.company.region))]),a("span",{staticClass:"company-data__info"},[t._v(t._s(t.company.marketOpen)+" - "+t._s(t.company.marketClose))]),a("span",{staticClass:"company-data__info"},[t._v(t._s(t.company.timezone))])]),a("div",{staticClass:"company-data__stock"},[a("span",{staticClass:"company-data__info company-data__info--bold"},[t._v(t._s(t.parseNumber.price)+" "+t._s(t.company.currency))]),a("span",{staticClass:"company-data__info",class:t.classObject},[t._v(t._s(t.parseNumber.change)+" ("+t._s(t.company.changePercent)+") "),a(t.setArrow,{tag:"component"})],1),a("span",{staticClass:"company-data__info"},[t._v("Closed: "+t._s(t.company.latestTradingDay))])])])])},tt=[],et={name:"CompanyListItem",props:{company:{type:Object}},data:function(){return{showRemoveOption:!1}},computed:{setImage:function(){return this.company.logo?this.company.logo:"https://via.placeholder.com/64x64"},parseNumber:function(){return{change:parseFloat(this.company.change),price:parseFloat(this.company.price)}},getChange:function(){return this.parseNumber.change>0},classObject:function(){return{"company-data__info--green":this.getChange,"company-data__info--red":!this.getChange}},setArrow:function(){return this.getChange?"b-icon-arrow-up":"b-icon-arrow-down"}},methods:{removeCompany:function(){this.$emit("remove-company",this.company.uuid)}}},at=et,nt=(a("aba4"),Object(m["a"])(at,Z,tt,!1,null,"d3fa209c",null)),ot=nt.exports,st={name:"CompanyList",components:{CompanyListItem:ot,CompanyListModel:X}},rt=st,ct=(a("ea5d"),Object(m["a"])(rt,V,K,!1,null,"1f050998",null)),it=ct.exports;n["default"].use(w["a"]);var lt=[{path:"/",name:"CompanyAdd",component:U},{path:"/company-list",name:"CompanyList",component:it}],ut=new w["a"]({routes:lt}),pt=ut,mt=a("5f5b"),dt=a("b1e0"),ht=a("d45f");a("f9e3"),a("2dd8");n["default"].config.productionTip=!1,n["default"].component("vue-bootstrap-typeahead",ht["a"]),n["default"].use(mt["a"]),n["default"].use(dt["a"]),new n["default"]({router:pt,render:function(t){return t(O)}}).$mount("#app")},"6dc0":function(t,e,a){},aba4:function(t,e,a){"use strict";a("6dc0")},ea5d:function(t,e,a){"use strict";a("0e85")}});
//# sourceMappingURL=app.a09eed5e.js.map